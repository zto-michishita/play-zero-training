@import play.mvc.Http.Request
@(widgets: Seq[Widget], form: Form[WidgetData])(implicit request: Request, messages: play.i18n.Messages)

@main("なんでも実況j") {
  <h1>掲示板</h1>

  @request.flash.asScala().data.map { case (name, value) =>
    <div class="@name">@value</div>
  }

  <table>
      @for(w <- widgets) {
          <tr><td>@w.name</td><td>@w.text</td></tr>
      }
  </table>

  <hr/>

  @if(form.hasGlobalErrors) {
      @form.globalErrors.asScala.map { error: play.data.validation.ValidationError =>
          <div>
              @error.key: @error.message
          </div>
      }
  }

  @helper.form(routes.FormController.createWidget) {
      @helper.CSRF.formField

      @helper.inputText(form("name"))

      @helper.inputText(form("text"))

      <button type="submit">Create widget</button>
  }
}
